{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Mine/FusionSpace/photoparkk-dev/photoparkk-next/src/lib/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseKey) {\r\n    console.warn('Supabase URL or Key is missing. Check your .env.local file.');\r\n}\r\n\r\n// Create a single supabase client for interacting with your database\r\nexport const supabase = createClient(supabaseUrl || '', supabaseKey || '');\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN;;AAKO,MAAM,WAAW,IAAA,gMAAY,EAAC,eAAe,IAAI,eAAe"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///C:/Mine/FusionSpace/photoparkk-dev/photoparkk-next/src/app/api/upload-image/route.js"],"sourcesContent":["\r\nimport { supabase } from '@/lib/supabase';\r\nimport { NextResponse } from 'next/server';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nexport async function POST(request) {\r\n    try {\r\n        const formData = await request.formData();\r\n        const file = formData.get('image');\r\n\r\n        if (!file) {\r\n            console.error(\"No image file in formData\");\r\n            return NextResponse.json({ message: \"No image file provided\" }, { status: 400 });\r\n        }\r\n\r\n        const arrayBuffer = await file.arrayBuffer();\r\n\r\n        // Generate a unique file name\r\n        const fileExt = file.name ? file.name.split('.').pop() : 'jpg';\r\n        const fileName = `${uuidv4()}.${fileExt}`;\r\n        const filePath = `uploads/${fileName}`;\r\n\r\n        // Upload to Supabase Storage\r\n        const { data, error } = await supabase.storage\r\n            .from('photos')\r\n            .upload(filePath, arrayBuffer, {\r\n                contentType: file.type,\r\n                upsert: false\r\n            });\r\n\r\n        if (error) {\r\n            console.error(\"Supabase Storage Error Details:\", JSON.stringify(error, null, 2));\r\n\r\n            if (error.message?.includes('bucket not found')) {\r\n                return NextResponse.json({\r\n                    message: \"Supabase storage bucket 'photos' not found. Please create it in your dashboard.\"\r\n                }, { status: 500 });\r\n            }\r\n            return NextResponse.json({ message: error.message || \"Storage upload failed\" }, { status: 500 });\r\n        }\r\n\r\n        // Get Public URL\r\n        const { data: { publicUrl } } = supabase.storage\r\n            .from('photos')\r\n            .getPublicUrl(filePath);\r\n\r\n        return NextResponse.json({ imageUrl: publicUrl });\r\n\r\n    } catch (error) {\r\n        console.error(\"Upload Error (Catch Block):\", error);\r\n        return NextResponse.json({ message: `Image upload failed: ${error.message}` }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;AAEO,eAAe,KAAK,OAAO;IAC9B,IAAI;QACA,MAAM,WAAW,MAAM,QAAQ,QAAQ;QACvC,MAAM,OAAO,SAAS,GAAG,CAAC;QAE1B,IAAI,CAAC,MAAM;YACP,QAAQ,KAAK,CAAC;YACd,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAyB,GAAG;gBAAE,QAAQ;YAAI;QAClF;QAEA,MAAM,cAAc,MAAM,KAAK,WAAW;QAE1C,8BAA8B;QAC9B,MAAM,UAAU,KAAK,IAAI,GAAG,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK;QACzD,MAAM,WAAW,GAAG,IAAA,mLAAM,IAAG,CAAC,EAAE,SAAS;QACzC,MAAM,WAAW,CAAC,QAAQ,EAAE,UAAU;QAEtC,6BAA6B;QAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CAAC,OAAO,CACzC,IAAI,CAAC,UACL,MAAM,CAAC,UAAU,aAAa;YAC3B,aAAa,KAAK,IAAI;YACtB,QAAQ;QACZ;QAEJ,IAAI,OAAO;YACP,QAAQ,KAAK,CAAC,mCAAmC,KAAK,SAAS,CAAC,OAAO,MAAM;YAE7E,IAAI,MAAM,OAAO,EAAE,SAAS,qBAAqB;gBAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;oBACrB,SAAS;gBACb,GAAG;oBAAE,QAAQ;gBAAI;YACrB;YACA,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS,MAAM,OAAO,IAAI;YAAwB,GAAG;gBAAE,QAAQ;YAAI;QAClG;QAEA,iBAAiB;QACjB,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,EAAE,GAAG,oIAAQ,CAAC,OAAO,CAC3C,IAAI,CAAC,UACL,YAAY,CAAC;QAElB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,UAAU;QAAU;IAEnD,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS,CAAC,qBAAqB,EAAE,MAAM,OAAO,EAAE;QAAC,GAAG;YAAE,QAAQ;QAAI;IACjG;AACJ"}}]
}