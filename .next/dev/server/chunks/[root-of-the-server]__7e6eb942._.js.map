{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Mine/FusionSpace/photoparkk-dev/photoparkk-next/src/lib/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseKey) {\r\n    console.warn('Supabase URL or Key is missing. Check your .env.local file.');\r\n}\r\n\r\n// Create a single supabase client for interacting with your database\r\nexport const supabase = createClient(supabaseUrl || '', supabaseKey || '');\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN;;AAKO,MAAM,WAAW,IAAA,gMAAY,EAAC,eAAe,IAAI,eAAe"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///C:/Mine/FusionSpace/photoparkk-dev/photoparkk-next/src/app/api/auth/login/route.js"],"sourcesContent":["\r\nimport { supabase } from '@/lib/supabase';\r\nimport bcrypt from 'bcryptjs';\r\nimport jwt from 'jsonwebtoken';\r\nimport { NextResponse } from 'next/server';\r\n\r\nexport async function POST(req) {\r\n    try {\r\n        const { email, password } = await req.json();\r\n        if (!email || !password) {\r\n            return NextResponse.json({ message: \"Email and password required\" }, { status: 400 });\r\n        }\r\n\r\n        // Find User\r\n        const { data: user, error: userError } = await supabase\r\n            .from('users')\r\n            .select('*')\r\n            .eq('email', email)\r\n            .single();\r\n\r\n        if (userError || !user) {\r\n            console.log(\"Login: User not found or error:\", email, userError);\r\n            return NextResponse.json({ message: \"Invalid Credentials\" }, { status: 400 });\r\n        }\r\n\r\n        console.log(\"Login: User found, verifying password...\");\r\n\r\n        // Verify Password\r\n        const isMatch = await bcrypt.compare(password, user.password_hash);\r\n        console.log(\"Login: Password match:\", isMatch);\r\n\r\n        if (!isMatch) {\r\n            return NextResponse.json({ message: \"Invalid Credentials\" }, { status: 400 });\r\n        }\r\n\r\n        // Generate Tokens\r\n        const accessToken = jwt.sign({ id: user.id }, process.env.JWT_SECRET, { expiresIn: '15m' });\r\n        const refreshToken = jwt.sign({ id: user.id }, process.env.JWT_SECRET, { expiresIn: '7d' });\r\n\r\n        return NextResponse.json({\r\n            user: {\r\n                _id: user.id,\r\n                id: user.id,\r\n                name: user.name,\r\n                email: user.email,\r\n                role: user.role,\r\n            },\r\n            accessToken,\r\n            refreshToken,\r\n        });\r\n\r\n    } catch (error) {\r\n        console.error(\"Login Error:\", error);\r\n        return NextResponse.json({ message: \"Server Error\", error: error.message }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;;;;;AAEO,eAAe,KAAK,GAAG;IAC1B,IAAI;QACA,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;QAC1C,IAAI,CAAC,SAAS,CAAC,UAAU;YACrB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QACvF;QAEA,YAAY;QACZ,MAAM,EAAE,MAAM,IAAI,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,oIAAQ,CAClD,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,SAAS,OACZ,MAAM;QAEX,IAAI,aAAa,CAAC,MAAM;YACpB,QAAQ,GAAG,CAAC,mCAAmC,OAAO;YACtD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,QAAQ,GAAG,CAAC;QAEZ,kBAAkB;QAClB,MAAM,UAAU,MAAM,8IAAM,CAAC,OAAO,CAAC,UAAU,KAAK,aAAa;QACjE,QAAQ,GAAG,CAAC,0BAA0B;QAEtC,IAAI,CAAC,SAAS;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,kBAAkB;QAClB,MAAM,cAAc,kJAAG,CAAC,IAAI,CAAC;YAAE,IAAI,KAAK,EAAE;QAAC,GAAG,QAAQ,GAAG,CAAC,UAAU,EAAE;YAAE,WAAW;QAAM;QACzF,MAAM,eAAe,kJAAG,CAAC,IAAI,CAAC;YAAE,IAAI,KAAK,EAAE;QAAC,GAAG,QAAQ,GAAG,CAAC,UAAU,EAAE;YAAE,WAAW;QAAK;QAEzF,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,MAAM;gBACF,KAAK,KAAK,EAAE;gBACZ,IAAI,KAAK,EAAE;gBACX,MAAM,KAAK,IAAI;gBACf,OAAO,KAAK,KAAK;gBACjB,MAAM,KAAK,IAAI;YACnB;YACA;YACA;QACJ;IAEJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAgB,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IAC9F;AACJ"}}]
}