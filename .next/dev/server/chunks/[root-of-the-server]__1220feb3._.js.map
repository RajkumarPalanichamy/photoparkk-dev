{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Mine/FusionSpace/photoparkk-dev/photoparkk-next/src/lib/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseKey) {\r\n    console.warn('Supabase URL or Key is missing. Check your .env.local file.');\r\n}\r\n\r\n// Create a single supabase client for interacting with your database\r\nexport const supabase = createClient(supabaseUrl || '', supabaseKey || '');\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN;;AAKO,MAAM,WAAW,IAAA,gMAAY,EAAC,eAAe,IAAI,eAAe"}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///C:/Mine/FusionSpace/photoparkk-dev/photoparkk-next/src/app/api/frames/%5Btype%5D/route.js"],"sourcesContent":["\r\nimport { supabase } from '@/lib/supabase';\r\nimport { NextResponse } from 'next/server';\r\n\r\nconst TABLE_MAP = {\r\n    'acrylic': 'acrylic_customize',\r\n    'canvas': 'canvas_customize',\r\n    'backlight': 'backlight_customize'\r\n};\r\n\r\nexport async function GET(request, { params }) {\r\n    const { type } = await params;\r\n    const { searchParams } = new URL(request.url);\r\n    const shape = searchParams.get('shape');\r\n\r\n    const tableName = TABLE_MAP[type];\r\n\r\n    if (!tableName) {\r\n        return NextResponse.json({ message: \"Invalid product type\" }, { status: 400 });\r\n    }\r\n\r\n    let query = supabase\r\n        .from(tableName)\r\n        .select('*');\r\n\r\n    if (shape) {\r\n        // Handle both capitalized and lower case shapes from query param\r\n        const capitalizedShape = shape.charAt(0).toUpperCase() + shape.slice(1).toLowerCase();\r\n        query = query.eq('shape', capitalizedShape);\r\n    }\r\n\r\n    const { data, error } = await query.order('created_at', { ascending: false });\r\n\r\n    if (error) {\r\n        console.error(`Fetch frames error for ${type}:`, error.message);\r\n        // If the table doesn't exist yet, return an empty array instead of 500\r\n        if (error.code === 'PGRST204' || error.code === 'PGRST205' || error.message.includes('relation') && error.message.includes('does not exist')) {\r\n            return NextResponse.json([]);\r\n        }\r\n        return NextResponse.json({ message: \"Failed to fetch frames\" }, { status: 500 });\r\n    }\r\n\r\n    return NextResponse.json(data);\r\n}\r\n\r\nexport async function POST(request, { params }) {\r\n    const { type } = await params;\r\n    const tableName = TABLE_MAP[type];\r\n\r\n    if (!tableName) {\r\n        return NextResponse.json({ message: \"Invalid product type\" }, { status: 400 });\r\n    }\r\n\r\n    try {\r\n        const body = await request.json();\r\n\r\n        const { data, error } = await supabase\r\n            .from(tableName)\r\n            .insert([body])\r\n            .select()\r\n            .single();\r\n\r\n        if (error) {\r\n            console.error(error);\r\n            return NextResponse.json({ message: \"Failed to create frame\" }, { status: 500 });\r\n        }\r\n\r\n        return NextResponse.json(data);\r\n    } catch (err) {\r\n        return NextResponse.json({ message: \"Invalid Request\" }, { status: 400 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AACA;AACA;;;AAEA,MAAM,YAAY;IACd,WAAW;IACX,UAAU;IACV,aAAa;AACjB;AAEO,eAAe,IAAI,OAAO,EAAE,EAAE,MAAM,EAAE;IACzC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IACvB,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,QAAQ,aAAa,GAAG,CAAC;IAE/B,MAAM,YAAY,SAAS,CAAC,KAAK;IAEjC,IAAI,CAAC,WAAW;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAChF;IAEA,IAAI,QAAQ,oIAAQ,CACf,IAAI,CAAC,WACL,MAAM,CAAC;IAEZ,IAAI,OAAO;QACP,iEAAiE;QACjE,MAAM,mBAAmB,MAAM,MAAM,CAAC,GAAG,WAAW,KAAK,MAAM,KAAK,CAAC,GAAG,WAAW;QACnF,QAAQ,MAAM,EAAE,CAAC,SAAS;IAC9B;IAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,MAAM,KAAK,CAAC,cAAc;QAAE,WAAW;IAAM;IAE3E,IAAI,OAAO;QACP,QAAQ,KAAK,CAAC,CAAC,uBAAuB,EAAE,KAAK,CAAC,CAAC,EAAE,MAAM,OAAO;QAC9D,uEAAuE;QACvE,IAAI,MAAM,IAAI,KAAK,cAAc,MAAM,IAAI,KAAK,cAAc,MAAM,OAAO,CAAC,QAAQ,CAAC,eAAe,MAAM,OAAO,CAAC,QAAQ,CAAC,mBAAmB;YAC1I,OAAO,gJAAY,CAAC,IAAI,CAAC,EAAE;QAC/B;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAyB,GAAG;YAAE,QAAQ;QAAI;IAClF;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;AAC7B;AAEO,eAAe,KAAK,OAAO,EAAE,EAAE,MAAM,EAAE;IAC1C,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IACvB,MAAM,YAAY,SAAS,CAAC,KAAK;IAEjC,IAAI,CAAC,WAAW;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAChF;IAEA,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CACjC,IAAI,CAAC,WACL,MAAM,CAAC;YAAC;SAAK,EACb,MAAM,GACN,MAAM;QAEX,IAAI,OAAO;YACP,QAAQ,KAAK,CAAC;YACd,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAyB,GAAG;gBAAE,QAAQ;YAAI;QAClF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,KAAK;QACV,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAkB,GAAG;YAAE,QAAQ;QAAI;IAC3E;AACJ"}}]
}