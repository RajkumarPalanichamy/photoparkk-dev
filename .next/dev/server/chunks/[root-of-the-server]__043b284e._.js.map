{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Mine/FusionSpace/photoparkk-dev/photoparkk-next/src/lib/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseKey) {\r\n    console.warn('Supabase URL or Key is missing. Check your .env.local file.');\r\n}\r\n\r\n// Create a single supabase client for interacting with your database\r\nexport const supabase = createClient(supabaseUrl || '', supabaseKey || '');\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN;;AAKO,MAAM,WAAW,IAAA,gMAAY,EAAC,eAAe,IAAI,eAAe"}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///C:/Mine/FusionSpace/photoparkk-dev/photoparkk-next/src/app/api/frameorders/route.js"],"sourcesContent":["\r\nimport { supabase } from '@/lib/supabase';\r\nimport { NextResponse } from 'next/server';\r\n\r\nexport async function GET(request) {\r\n    try {\r\n        const { searchParams } = new URL(request.url);\r\n        const page = parseInt(searchParams.get('page') || '1');\r\n        const limit = parseInt(searchParams.get('limit') || '10');\r\n        const status = searchParams.get('status');\r\n\r\n        const from = (page - 1) * limit;\r\n        const to = from + limit - 1;\r\n\r\n        let query = supabase\r\n            .from('frame_orders')\r\n            .select('*', { count: 'exact' })\r\n            .order('created_at', { ascending: false })\r\n            .range(from, to);\r\n\r\n        if (status && status !== 'all') {\r\n            query = query.eq('status', status);\r\n        }\r\n\r\n        const { data, count, error } = await query;\r\n\r\n        if (error) throw error;\r\n\r\n        return NextResponse.json({\r\n            orders: data, // Client expects 'orders'\r\n            total: count,\r\n            page,\r\n            totalPages: Math.ceil((count || 0) / limit)\r\n        });\r\n\r\n    } catch (error) {\r\n        console.error(\"Fetch Frame Orders Error:\", error);\r\n        return NextResponse.json({ message: \"Error fetching frame orders\" }, { status: 500 });\r\n    }\r\n}\r\nexport async function POST(request) {\r\n    try {\r\n        const body = await request.json();\r\n        const {\r\n            userId,\r\n            shippingDetails,\r\n            items,\r\n            status,\r\n            shippingCharge,\r\n            grandTotal\r\n        } = body;\r\n\r\n        const { data, error } = await supabase\r\n            .from('frame_orders')\r\n            .insert([\r\n                {\r\n                    user_id: userId,\r\n                    shipping_details: shippingDetails,\r\n                    items: items,\r\n                    status: status || 'Pending',\r\n                    // AssuminggrandTotal is total price, might need adjustment if separate column exists\r\n                    // Let's check schema again.\r\n                }\r\n            ])\r\n            .select();\r\n\r\n        if (error) throw error;\r\n\r\n        return NextResponse.json({ message: \"Order placed successfully\", order: data[0] });\r\n    } catch (error) {\r\n        console.error(\"Create Frame Order Error:\", error);\r\n        return NextResponse.json({ message: \"Error placing frame order\" }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AACA;AACA;;;AAEO,eAAe,IAAI,OAAO;IAC7B,IAAI;QACA,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,OAAO,SAAS,aAAa,GAAG,CAAC,WAAW;QAClD,MAAM,QAAQ,SAAS,aAAa,GAAG,CAAC,YAAY;QACpD,MAAM,SAAS,aAAa,GAAG,CAAC;QAEhC,MAAM,OAAO,CAAC,OAAO,CAAC,IAAI;QAC1B,MAAM,KAAK,OAAO,QAAQ;QAE1B,IAAI,QAAQ,oIAAQ,CACf,IAAI,CAAC,gBACL,MAAM,CAAC,KAAK;YAAE,OAAO;QAAQ,GAC7B,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM,GACvC,KAAK,CAAC,MAAM;QAEjB,IAAI,UAAU,WAAW,OAAO;YAC5B,QAAQ,MAAM,EAAE,CAAC,UAAU;QAC/B;QAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,MAAM;QAErC,IAAI,OAAO,MAAM;QAEjB,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,QAAQ;YACR,OAAO;YACP;YACA,YAAY,KAAK,IAAI,CAAC,CAAC,SAAS,CAAC,IAAI;QACzC;IAEJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA8B,GAAG;YAAE,QAAQ;QAAI;IACvF;AACJ;AACO,eAAe,KAAK,OAAO;IAC9B,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EACF,MAAM,EACN,eAAe,EACf,KAAK,EACL,MAAM,EACN,cAAc,EACd,UAAU,EACb,GAAG;QAEJ,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CACjC,IAAI,CAAC,gBACL,MAAM,CAAC;YACJ;gBACI,SAAS;gBACT,kBAAkB;gBAClB,OAAO;gBACP,QAAQ,UAAU;YAGtB;SACH,EACA,MAAM;QAEX,IAAI,OAAO,MAAM;QAEjB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAA6B,OAAO,IAAI,CAAC,EAAE;QAAC;IACpF,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACrF;AACJ"}}]
}